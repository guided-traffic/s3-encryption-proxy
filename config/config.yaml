# S3 Encryption Proxy Configuration Example

# Server configuration
bind_address: "0.0.0.0:8080"
log_level: "info"
# log_health_requests: false  # Optional: disable health endpoint logging (default: false)

# TLS configuration (optional)
tls:
  enabled: false
  cert_file: "/path/to/certificate.pem"  # Required when TLS is enabled
  key_file: "/path/to/private-key.pem"   # Required when TLS is enabled

# S3 backend configuration
target_endpoint: "https://s3.amazonaws.com"
region: "us-east-1"
access_key_id: "${S3_ACCESS_KEY_ID}"
secret_key: "${S3_SECRET_KEY}"

# Multi-Provider Encryption Configuration
encryption:
  # Active encryption method (used for writing new files)
  encryption_method_alias: "default"

  # List of encryption providers (used for reading/decrypting files)
  providers:
    - alias: "default"
      type: "tink"
      description: "Default Tink envelope encryption"
      config:
        kek_uri: "gcp-kms://projects/your-project/locations/global/keyRings/your-ring/cryptoKeys/your-key"
        credentials_path: "/path/to/service-account.json"
        algorithm: "AES256_GCM"
        key_rotation_days: 90
        metadata_key_prefix: "x-s3ep-"

    # Alternative AES configuration (commented out)
    # - alias: "aes-backup"
    #   type: "aes-gcm"
    #   description: "Direct AES-256-GCM encryption"
    #   config:
    #     # Generate a key with: openssl rand -base64 32
    #     aes_key: "your-base64-encoded-256-bit-key-here"
    #     algorithm: "AES256_GCM"
    #     metadata_key_prefix: "x-s3ep-aes-"
